<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Memcached on Du, Chengbin's Blog</title><link>https://dcb9.github.io/tags/memcached/</link><description>Recent content in Memcached on Du, Chengbin's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>© Copyright Du, Chengbin</copyright><lastBuildDate>Sat, 11 Oct 2014 00:00:00 +0800</lastBuildDate><atom:link href="https://dcb9.github.io/tags/memcached/index.xml" rel="self" type="application/rss+xml"/><item><title>Yii在Web分布式下将Session存储到Memcached</title><link>https://dcb9.github.io/posts/2014-10-11-yii-session-store-to-memcached/</link><pubDate>Sat, 11 Oct 2014 00:00:00 +0800</pubDate><guid>https://dcb9.github.io/posts/2014-10-11-yii-session-store-to-memcached/</guid><description>当网站的访问越来越大的时候一台机器无法支持迸发，或都是为了做到去单点，都需要在后端搭建一个集群来处理用户的请求，由于传统的PHP Session是文件级的存储，那么如果一个用户在第一次登录的时候这个Session文件存在 A 服务器上，而第二次的时候被分到了B 服务器上，则又认为他没有登录了（当然配置好负载均衡的是可以让同一个用户永远在同一台机器上的，这个的可以略过。。。），所以我们需要将它存在一个别的地方，我选的是Memcached，存在这里面，当然后期可能会选择Redis因为它在取值方面可以更精确，省内网带宽。
在Yii里面我想达到将Session信息存储到Memcached里面只需要稍做配置即可，我当前的Yii版本为yii-1.1.13.e9e4a0
修改componets配置文件 &amp;#39;session&amp;#39; =&amp;gt; array( &amp;#39;class&amp;#39; =&amp;gt; &amp;#39;CCacheHttpSession&amp;#39;, &amp;#39;autoStart&amp;#39; =&amp;gt; true, &amp;#39;cacheID&amp;#39; =&amp;gt; &amp;#39;sessionCache&amp;#39;, // we only use the sessionCache to store the session &amp;#39;cookieMode&amp;#39; =&amp;gt; &amp;#39;only&amp;#39;, &amp;#39;timeout&amp;#39; =&amp;gt; 1400, ), &amp;#39;sessionCache&amp;#39; =&amp;gt; array( &amp;#39;class&amp;#39; =&amp;gt; &amp;#39;system.caching.CMemCache&amp;#39;, &amp;#39;servers&amp;#39; =&amp;gt; array( array( &amp;#39;host&amp;#39; =&amp;gt; &amp;#39;192.168.10.193&amp;#39;, &amp;#39;port&amp;#39; =&amp;gt; 11211, &amp;#39;weight&amp;#39; =&amp;gt; 6), array( &amp;#39;host&amp;#39; =&amp;gt; &amp;#39;192.168.10.226&amp;#39;, &amp;#39;port&amp;#39; =&amp;gt; 11211, &amp;#39;weight&amp;#39; =&amp;gt; 3), array( &amp;#39;host&amp;#39; =&amp;gt; &amp;#39;192.168.10.228&amp;#39;, &amp;#39;port&amp;#39; =&amp;gt; 11211, &amp;#39;weight&amp;#39; =&amp;gt; 2), ), ), 测试一下登录没有问题，然后非常好奇，它真的就存入到Memcached里面了吗？我们如何来验证一下呢？ 为了省去新建一个Controller所以我就直接写一个action到SiteController里面去了。</description></item></channel></rss>